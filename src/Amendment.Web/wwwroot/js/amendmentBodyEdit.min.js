function newFunction(n,t){var i,r,u;n.id===amendmentId&&(i=arrayFirstIndexOf(t.amendments(),function(t){return t.id()===n.id}),i>-1?(r=t.amendments()[i],u=convertToObservable(n),t.amendments.replace(r,u)):t.amendments.push(convertToObservable(n)))}var AmendmentModel=function(){var t=ManageAmendmentHub(),n=this;n.amendments=ko.observableArray();t.on("amendment.amendmentReturn",function(t){newFunction(t,n)});$(document).on("amendment.amendmentChange",function(t,i){newFunction(i.data,n)});$(document).on("amendment.ready",function(){t.invoke("getAmendment",amendmentId)});$(document).on("amendment.amendmentBodyChange",function(t,i){var f,u,r,e,o;if(console.log(i),f=i.data.amendId,r=arrayFirstIndexOf(n.amendments(),function(n){return n.id()===f}),r!==-1){u=n.amendments()[r];switch(i.results.operationType){case 1:u.amendmentBodies.push(convertToObservable(i.data));break;case 2:r=arrayFirstIndexOf(u.amendmentBodies(),function(n){return n.id()===i.id});r>-1&&(e=u.amendmentBodies()[r],o=convertToObservable(i.data),u.amendmentBodies.replace(e,o));break;case 3:u.amendmentBodies.remove(function(n){return n.id()===i.id})}}});$("#insertPage").click(function(){insertAtCaret("AmendBody","**NEWPAGE**")})};ko.applyBindings(new AmendmentModel);