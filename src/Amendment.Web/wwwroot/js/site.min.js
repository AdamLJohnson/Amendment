function ManageAmendmentHub(){amendmentUpdatesConnection.onclose(()=>{toastr.error("Lost Connection",null,{closeButton:!0})});amendmentUpdatesConnection.on("AmendmentChange",n=>{toastr.options.escapeHtml=!0;var t="Amendment "+n.id;switch(n.results.operationType){case 1:t+=" Created";break;case 2:t+=" Updated";break;case 3:t+=" Deleted"}toastr.info(t);jQuery.event.trigger("AmendmentChange",n)});amendmentUpdatesConnection.on("AmendmentBodyChange",n=>{toastr.options.escapeHtml=!0;var t="Amendment Body "+n.id;switch(n.results.operationType){case 1:t+=" Created";break;case 2:t+=" Updated";break;case 3:t+=" Deleted"}toastr.info(t);jQuery.event.trigger("AmendmentBodyChange",n)});amendmentUpdatesConnection.start().catch(n=>console.error(n.toString()))}function ManageScreenHub(){screenUpdatesConnection.on("screenChange",n=>{if(_usersRoles.indexOf("System Administrator")>-1){toastr.options.escapeHtml=!0;var t="screen "+n.id;toastr.info(t)}jQuery.event.trigger("screenChange",n)});screenUpdatesConnection.start().catch(n=>console.error(n.toString()))}function convertArrayToObservable(n){var t=[];return $.each(n,function(n,i){var r=convertToObservable(i);t.push(r)}),t}function convertToObservable(n){var t={};return Object.keys(n).forEach(function(i){t[i]=Array.isArray(n[i])?ko.observableArray(n[i]):ko.observable(n[i])}),t}function arrayFirstIndexOf(n,t,i){for(var r=0,u=n.length;r<u;r++)if(t.call(i,n[r]))return r;return-1}const amendmentUpdatesConnection=(new signalR.HubConnectionBuilder).withUrl("/amendmentHub").build(),screenUpdatesConnection=(new signalR.HubConnectionBuilder).withUrl("/screenHub").build();_isAuthenticated&&ManageAmendmentHub();ManageScreenHub();