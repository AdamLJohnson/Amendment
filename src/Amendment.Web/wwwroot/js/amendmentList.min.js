var AmendmentModel=function(n){var i=ManageAmendmentHub(),t=this;t.amendments=ko.observableArray(convertArrayToObservable(n));t.userRoles=_usersRoles;t.liveAmendment=ko.computed(function(){var n=arrayFirstIndexOf(t.amendments(),function(n){return n.isLive()});return n>-1?t.amendments()[n].id():-1});t.languageData=languageData;t.clearScreens=function(){i.invoke("clearScreens")};t.amendmentGoLive=function(n){i.invoke("amendmentGoLive",n.id(),!0)};$(document).on("amendment.amendmentChange",function(n,i){var r,u,f;console.log(i);switch(i.results.operationType){case 1:t.amendments.push(convertToObservable(i.data));break;case 2:r=arrayFirstIndexOf(t.amendments(),function(n){return n.id()===i.id});r>-1&&(u=t.amendments()[r],f=convertToObservable(i.data),t.amendments.replace(u,f));break;case 3:t.amendments.remove(function(n){return n.id()===i.id})}});$(document).on("amendment.amendmentBodyChange",function(n,i){var e,u,r,f,o,s;if(console.log(i),e=i.data.amendId,u=arrayFirstIndexOf(t.amendments(),function(n){return n.id()===e}),u!==-1){r=t.amendments()[u];switch(i.results.operationType){case 1:r.amendmentBodies.push(convertToObservable(i.data));break;case 2:f=arrayFirstIndexOf(r.amendmentBodies(),function(n){return n.id()===i.id});f>-1&&(o=r.amendmentBodies()[f],s=convertToObservable(i.data),r.amendmentBodies.replace(o,s));break;case 3:r.amendmentBodies.remove(function(n){return n.id()===i.id})}}})};ko.applyBindings(new AmendmentModel(initialData),document.getElementById("amendmentList"));